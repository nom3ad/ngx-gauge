!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define("ngx-gauge",["exports","@angular/core","@angular/common"],e):e((t=t||self)["ngx-gauge"]={},t.ng.core,t.ng.common)}(this,function(t,e,n){"use strict";function i(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function a(t,e){return void 0===e&&(e=0),isNaN(parseFloat(t))||isNaN(Number(t))?e:Number(t)}function r(t){return t+"px"}var o=function(){function t(){}return t.decorators=[{type:e.Directive,args:[{selector:"ngx-gauge-append",exportAs:"ngxGaugeAppend"}]}],t}(),s=function(){function t(){}return t.decorators=[{type:e.Directive,args:[{selector:"ngx-gauge-prepend",exportAs:"ngxGaugePrepend"}]}],t}(),l=function(){function t(){}return t.decorators=[{type:e.Directive,args:[{selector:"ngx-gauge-value",exportAs:"ngxGaugeValue"}]}],t}(),u=function(){function t(){}return t.decorators=[{type:e.Directive,args:[{selector:"ngx-gauge-label",exportAs:"ngxGaugeLabel"}]}],t}(),c={MIN:0,MAX:100,TYPE:"arch",THICK:4,FOREGROUND_COLOR:"#009688",BACKGROUND_COLOR:"rgba(0, 0, 0, 0.1)",CAP:"butt",SIZE:200};function h(t){return["#009688","#dbf7f7"][t]}var p=function(){function t(t,e){this._elementRef=t,this._renderer=e,this._size=c.SIZE,this._min=c.MIN,this._max=c.MAX,this._animate=!0,this._initialized=!1,this._animationRequestID=0,this.ariaLabel="",this.ariaLabelledby=null,this.type=c.TYPE,this.cap=c.CAP,this.thick=c.THICK,this.foregroundColor=c.FOREGROUND_COLOR,this.backgroundColor=c.BACKGROUND_COLOR,this.thresholds=Object.create(null),this._value=0,this.duration=1200}return Object.defineProperty(t.prototype,"size",{get:function(){return this._size},set:function(t){this._size=a(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"min",{get:function(){return this._min},set:function(t){this._min=a(t,c.MIN)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"animate",{get:function(){return this._animate},set:function(t){this._animate=function(t){return null!=t&&""+t!="false"}(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this._max},set:function(t){this._max=a(t,c.MAX)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(t){var e=this;Array.isArray(t)?"object"==typeof t[0]?(this._value=a(t.reduce(function(t,e){return t+e.step},0)),this._steps=t.map(function(t,n){return{ratio:t.step/e._value,color:t.color||h(n)}})):(this._value=a(t.reduce(function(t,e){return t+e},0)),this._steps=t.map(function(t,n){return{ratio:t/e._value,color:h(n)}})):this._value=a(t)},enumerable:!0,configurable:!0}),t.prototype.ngOnChanges=function(t){var e=t.thick||t.type||t.cap||t.size,n=t.value||t.min||t.max;if(this._initialized){if(n){var i=void 0,a=void 0;t.value&&(i=t.value.currentValue,a=t.value.previousValue),this._update(i,a)}e&&(this._destroy(),this._init())}},t.prototype._updateSize=function(){this._renderer.setElementStyle(this._elementRef.nativeElement,"width",r(this._size)),this._renderer.setElementStyle(this._elementRef.nativeElement,"height",r(this._size)),this._canvas.nativeElement.width=this.size,this._canvas.nativeElement.height=this.size},t.prototype.ngAfterViewInit=function(){this._canvas&&this._init()},t.prototype.ngOnDestroy=function(){this._destroy()},t.prototype._getBounds=function(t){var e,n;return"semi"==t?(e=Math.PI,n=2*Math.PI):"full"==t?(e=1.5*Math.PI,n=3.5*Math.PI):"arch"===t&&(e=.8*Math.PI,n=2.2*Math.PI),{head:e,tail:n}},t.prototype._drawShell=function(t,e,n,a){var r,o,s=this._getCenter(),l=this._getRadius();if(e=Math.max(e,t),e=Math.min(e,n),this._initialized)if(this._clear(),this._context.beginPath(),this._context.strokeStyle=this.backgroundColor,this._context.arc(s.x,s.y,l,e,n,!1),this._context.stroke(),this._steps){var u=e-t,c=t;try{for(var h=i(this._steps),p=h.next();!p.done;p=h.next()){var g=p.value,d=g.color,f=c+u*g.ratio;this._context.beginPath(),this._context.strokeStyle=d,this._context.arc(s.x,s.y,l,c,f,!1),this._context.stroke(),c=f}}catch(t){r={error:t}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(r)throw r.error}}}else this._context.beginPath(),this._context.strokeStyle=a,this._context.arc(s.x,s.y,l,t,e,!1),this._context.stroke()},t.prototype._clear=function(){this._context.clearRect(0,0,this._getWidth(),this._getHeight())},t.prototype._getWidth=function(){return this.size},t.prototype._getHeight=function(){return this.size},t.prototype._getRadius=function(){return this._getCenter().x-this.thick},t.prototype._getCenter=function(){return{x:this._getWidth()/2,y:this._getHeight()/2}},t.prototype._init=function(){this._context=this._canvas.nativeElement.getContext("2d"),this._initialized=!0,this._updateSize(),this._setupStyles(),this._create()},t.prototype._destroy=function(){this._animationRequestID&&(window.cancelAnimationFrame(this._animationRequestID),this._animationRequestID=0),this._clear(),this._context=null,this._initialized=!1},t.prototype._setupStyles=function(){this._context.lineCap=this.cap,this._context.lineWidth=this.thick},t.prototype._getForegroundColorByRange=function(t){var e=Object.keys(this.thresholds).filter(function(e){return function(t){return null!=t&&!isNaN(parseFloat(t))&&!isNaN(Number(t))}(e)&&Number(e)<=t}).sort(function(t,e){return Number(t)-Number(e)}).reverse()[0];return void 0!==e&&this.thresholds[e].color||this.foregroundColor},t.prototype._create=function(t,e){var n,i=this,a=this.type,r=this._getBounds(a),o=this.duration,s=this.min,l=this.max,u=function(t,e,n){return Math.max(e,Math.min(n,t))}(this.value,this.min,this.max),c=r.head,h=(r.tail-r.head)/(l-s),p=h*(u-s),g=r.tail,d=this._getForegroundColorByRange(u);i._animationRequestID&&window.cancelAnimationFrame(i._animationRequestID),this._animate?(null!=t&&null!=e&&(p=h*t-h*e),i._animationRequestID=window.requestAnimationFrame(function(t){(function t(a){var r=(a=a||(new Date).getTime())-n,l=Math.min(r/o,1),u=c+(e?(e-s)*h:0)+p*l;i._drawShell(c,u,g,d),i._animationRequestID&&r<o?i._animationRequestID=window.requestAnimationFrame(function(e){return t(e)}):window.cancelAnimationFrame(i._animationRequestID)})(n=t||(new Date).getTime())})):i._drawShell(c,c+p,g,d)},t.prototype._update=function(t,e){this._clear(),this._create(t,e)},t.decorators=[{type:e.Component,args:[{selector:"ngx-gauge",template:'<div class="reading-block" #reading [style.fontSize]="size * 0.22 + \'px\'" [style.lineHeight]="size + \'px\'">\n  \x3c!-- This block can not be indented correctly, because line breaks cause layout spacing, related problem: https://pt.stackoverflow.com/q/276760/2998 --\x3e\n  <u class="reading-affix" [ngSwitch]="_prependChild != null"><ng-content select="ngx-gauge-prepend" *ngSwitchCase="true"></ng-content><ng-container *ngSwitchCase="false">{{prepend}}</ng-container></u><ng-container [ngSwitch]="_valueDisplayChild != null"><ng-content *ngSwitchCase="true" select="ngx-gauge-value"></ng-content><ng-container *ngSwitchCase="false">{{value | number}}</ng-container></ng-container><u class="reading-affix" [ngSwitch]="_appendChild != null"><ng-content select="ngx-gauge-append" *ngSwitchCase="true"></ng-content><ng-container *ngSwitchCase="false">{{append}}</ng-container></u>\n</div>\n<div class="reading-label" \n     [style.fontSize]="size / 13 + \'px\'" \n     [style.lineHeight]="(5 * size / 13) + size + \'px\'" \n     [ngSwitch]="_labelChild != null">\n  <ng-content select="ngx-gauge-label" *ngSwitchCase="true"></ng-content>\n  <ng-container *ngSwitchCase="false">{{label}}</ng-container>\n</div>\n<canvas #canvas></canvas>',host:{role:"slider","aria-readonly":"true","[class.ngx-gauge-meter]":"true","[attr.aria-valuemin]":"min","[attr.aria-valuemax]":"max","[attr.aria-valuenow]":"value","[attr.aria-label]":"ariaLabel","[attr.aria-labelledby]":"ariaLabelledby"},encapsulation:e.ViewEncapsulation.None,styles:[".ngx-gauge-meter{display:inline-block;text-align:center;position:relative}.reading-block{position:absolute;width:100%;font-weight:400;white-space:nowrap;text-align:center;overflow:hidden;text-overflow:ellipsis}.reading-label{font-family:inherit;width:100%;display:inline-block;position:absolute;text-align:center;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:400}.reading-affix{text-decoration:none;font-size:.6em;opacity:.8;font-weight:200;padding:0 .18em}.reading-affix:first-child{padding-left:0}.reading-affix:last-child{padding-right:0}"]}]}],t.ctorParameters=function(){return[{type:e.ElementRef},{type:e.Renderer}]},t.propDecorators={_canvas:[{type:e.ViewChild,args:["canvas",{static:!0}]}],_labelChild:[{type:e.ContentChild,args:[u,{static:!1}]}],_prependChild:[{type:e.ContentChild,args:[s,{static:!1}]}],_appendChild:[{type:e.ContentChild,args:[o,{static:!1}]}],_valueDisplayChild:[{type:e.ContentChild,args:[l,{static:!1}]}],ariaLabel:[{type:e.Input,args:["aria-label"]}],ariaLabelledby:[{type:e.Input,args:["aria-labelledby"]}],size:[{type:e.Input}],min:[{type:e.Input}],animate:[{type:e.Input}],max:[{type:e.Input}],type:[{type:e.Input}],cap:[{type:e.Input}],thick:[{type:e.Input}],label:[{type:e.Input}],append:[{type:e.Input}],prepend:[{type:e.Input}],foregroundColor:[{type:e.Input}],backgroundColor:[{type:e.Input}],thresholds:[{type:e.Input}],value:[{type:e.Input}],duration:[{type:e.Input}]},t}();var g=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{imports:[n.CommonModule],declarations:[p,o,s,l,u],exports:[p,o,s,l,u]}]}],t}();t.NgxGaugeModule=g,t.ɵa=p,t.ɵb=o,t.ɵc=s,t.ɵd=l,t.ɵe=u,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-gauge.umd.min.js.map